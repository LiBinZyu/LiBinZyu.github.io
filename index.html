<!DOCTYPE html>
<html lang="zh-CN" data-lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æç‚³å„’ Portfolio</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Noto+Sans+SC:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    
    <!-- Favicon -->
    <!-- <link rel="icon" type="image/x-icon" href="assets/favicon.ico"> -->
    
    <!-- Three.js and Vanta.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script>
</head>
<body class="theme-light">
    <!-- Vanta.js Birds Effect - Full Screen Background -->
    <div id="vanta-birds" class="vanta-container"></div>
    
    <!-- Header with Profile -->
    <header class="header">
        <div class="container">
            <div class="profile-section">
                <div class="profile-image">
                    <img src="assets/images/profile_life.png" alt="Profile Image" id="profile-img" onerror="this.src='https://via.placeholder.com/150x150/193FB9/FFFFFF?text=LBZ'; console.error('Failed to load profile image, using placeholder')" onload="console.log('Profile image loaded successfully')">
                </div>
                <div class="profile-info">
                    <h1 class="profile-name" data-en="Bingru Li" data-zh="æç‚³å„’">æç‚³å„’</h1>
                    <p class="profile-title" data-en="Technical Artist & Software Engineer" data-zh="æŠ€æœ¯ç¾æœ¯ & å¼€å‘è€…">æŠ€æœ¯ç¾æœ¯ & å¼€å‘è€…</p>
                    <p class="profile-location" data-en="Based in Suzhou, China" data-zh="ç°å±…è‹å·">ç°å±…è‹å·</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="nav-menu">
        <div class="container">
            <div class="nav-items">
                <button class="nav-item active" data-section="experiences">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/handbag.svg" alt="Experiences" class="icon" width="20" height="20">
                    <span data-en="Exp" data-zh="ç»å†">ç»å†</span>
                </button>
                <button class="nav-item" data-section="projects">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/arcade.svg" alt="Projects" class="icon" width="20" height="20">
                    <span data-en="Proj" data-zh="é¡¹ç›®">é¡¹ç›®</span>
                </button>
                <button class="nav-item" data-section="contact">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/send-mail.svg" alt="Contact" class="icon" width="20" height="20">
                    <span data-en="Contact" data-zh="è”ç³»">è”ç³»</span>
                </button>
            </div>
            <div class="nav-controls">
                <button class="btn btn-primary" id="download-cv" title="Download CV">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/cloud-download.svg" class="icon" width="16" height="16"  style="filter: brightness(0) invert(1);">
                    <span data-en="CV" data-zh="ç®€å†">ç®€å†</span>
                </button>
                <button class="btn btn-secondary" id="theme-toggle" title="Toggle Theme">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/half-moon.svg" class="icon" width="16" height="16">
                </button>
                <button class="btn btn-secondary" id="language-toggle" title="Toggle Language">
                    <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/translate.svg" alt="Toggle Language" class="icon" width="16" height="16">
                </button>
            </div>
        </div>
    </nav>

    <div class="main-content">
        <!-- Waterfall Container -->
        <div class="waterfall-container">
            <!-- Experiences Section -->
            <section id="experiences" class="content-section full-width-section">
                <div class="experiences-timeline" id="experiences-content">
                    <!-- Content will be loaded from data file -->
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects" class="content-section full-width-section">
                <div class="projects-grid" id="projects-content">
                    <!-- Content will be loaded from data file -->
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact" class="content-section full-width-section">
                <div class="contact-content">
                    <div class="contact-info">
                        <div class="contact-item" data-copy="bingru.li24@student.xjtlu.edu.cn" data-type="email">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/mail.svg" alt="Email" class="contact-icon icon" width="20" height="20">
                            <span>bingru.li24@student.xjtlu.edu.cn</span>
                        </div>
                        <div class="contact-item" data-copy="+86 18080637660" data-type="phone">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/phone.svg" alt="Phone" class="contact-icon icon" width="20" height="20">
                            <span>+86 18080637660</span>
                        </div>
                        <div class="contact-item" data-copy="LiBinZyu" data-type="wechat">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/chat-bubble-empty.svg" alt="WeChat" class="contact-icon icon" width="20" height="20">
                            <span>WeChat</span>
                        </div>
                        <div class="contact-item" data-copy="https://github.com/LiBinZyu" data-type="github">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/github.svg" alt="GitHub" class="contact-icon icon" width="20" height="20">
                            <span>GitHub</span>
                        </div>
                        <div class="contact-item" data-copy="https://www.linkedin.com/in/robbingruli" data-type="linkedin">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/linkedin.svg" alt="LinkedIn" class="contact-icon icon" width="20" height="20">
                            <span>LinkedIn</span>
                        </div>
                    </div>
                    
                    <form class="contact-form" id="contact-form">
                        <h4 data-en="Drop me a message" data-zh="æƒ³è¦ç•™è¨€å—ï¼Ÿ">Drop me a message</h4>
                        <div class="wave-group">
                          <span data-en="Name -optional" data-zh="å§“å -optional">å§“å optional</span>
                          <input type="text" id="contact-name" name="name" class="input" maxlength="50" autocomplete="off">
                          <span class="bar"></span>
                        </div>
                        <div class="wave-group">
                          <span data-en="Contact -optional" data-zh="è”ç³»æ–¹å¼ -optional">è”ç³»æ–¹å¼ optional</span>
                          <input type="text" id="contact-contact" name="contact" class="input" maxlength="100" autocomplete="off">
                          <span class="bar"></span>
                        </div>
                        <div class="form-group">
                          <textarea id="contact-message" name="message" class="message-textarea" rows="4" maxlength="300" required style="resize:vertical; min-height:80px; max-height:180px;"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/send.svg" alt="Send" class="icon" width="20" height="20" style="filter: brightness(0) invert(1);">
                            <span data-en="Send" data-zh="å‘é€">å‘é€</span>
                        </button>
                    </form>
                </div>
            </section>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="project-modal">
        <div class="modal-backdrop" id="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <img src="https://cdn.jsdelivr.net/npm/iconoir@latest/icons/cancel.svg" alt="Close" class="icon" width="20" height="20">
            </button>
            <div class="modal-info modal-info-textonly">
                <h2 class="modal-title" id="modal-title"></h2>
                <p class="modal-description" id="modal-description"></p>
                <div class="tech-tags" id="modal-tech"></div>
                <div class="project-links" id="modal-links"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">
                    <span data-en="Last updated:" data-zh="æœ€åæ›´æ–°ï¼š">æœ€åæ›´æ–°ï¼š</span>
                    <span id="last-updated">2025-09-10</span>
                </p>
                <p class="footer-text">
                    <span data-en="Location:" data-zh="æ‰€åœ¨åœ°ï¼š">æ‰€åœ¨åœ°ï¼š</span>
                    <span data-en="ğŸ‡¨ğŸ‡³ Suzhou | Shanghai" data-zh="ğŸ‡¨ğŸ‡³ è‹å· | ä¸Šæµ·">ğŸ‡¨ğŸ‡³ è‹å· | ä¸Šæµ·</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data/data.js"></script>
    <script src="js/components.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Vanta.js Birds Effect -->
    <script>
        // Vanta.js birds effect instance
        let vantaEffect = null;
        
        // Color schemes for different themes
        const lightThemeColors = {
            color1: 0x8d9aeb,
            color2: 0x465bff,
            speedLimit: 5.00
        };
        
        const darkThemeColors = {
            color1: 0x372b6e,
            color2: 0x142455,
            speedLimit: 4.00
        };
        
        // Function to initialize Vanta effect
        function initVantaEffect() {
            // Check current theme
            const isDarkTheme = document.body.classList.contains('theme-dark');
            const colors = isDarkTheme ? darkThemeColors : lightThemeColors;
            
            // Destroy existing effect if it exists
            if (vantaEffect) {
                vantaEffect.destroy();
            }
            
            // Initialize new effect
            vantaEffect = VANTA.BIRDS({
                el: "#vanta-birds",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                scale: 1.00,
                scaleMobile: 1.00,
                backgroundAlpha: 0.00,
                ...colors
            });
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initVantaEffect();
        });
        
        // Listen for theme changes
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                // Wait for theme class to be applied
                setTimeout(() => {
                    initVantaEffect();
                }, 100);
            });
        }
        
        // Scroll Spy and Smooth Scroll functionality
        function initScrollSpy() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.full-width-section');
            
            // Smooth scroll function
            function smoothScrollTo(targetId) {
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    const offsetTop = targetElement.offsetTop+200; // Account for sticky nav
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Update active nav item based on scroll position
            function updateActiveNav() {
                const scrollPos = window.scrollY + 150; // Offset for better detection
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                        // Remove active class from all nav items
                        navItems.forEach(item => item.classList.remove('active'));
                        
                        // Add active class to corresponding nav item
                        const activeNavItem = document.querySelector(`[data-section="${sectionId}"]`);
                        if (activeNavItem) {
                            activeNavItem.classList.add('active');
                        }
                    }
                });
            }
            
            // Add click event listeners to nav items
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    smoothScrollTo(targetSection);
                });
            });
            
            // Add scroll event listener
            window.addEventListener('scroll', updateActiveNav);
            
            // Initial call to set correct active state
            updateActiveNav();
        }
        
        // Initialize scroll spy when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initScrollSpy();
        });
    </script>
</body>
</html>
