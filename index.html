<!DOCTYPE html>
<html lang="zh-CN" data-lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊùéÁÇ≥ÂÑí Portfolio</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Noto+Sans+SC:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- Material Design Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    
    <!-- Three.js and Vanta.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script>
  <script src="js/av-min.js"></script>
</head>
<body class="theme-light">
    <!-- Vanta.js Birds Effect - Full Screen Background -->
    <div id="vanta-birds" class="vanta-container"></div>
    
    <!-- Header with Profile -->
    <header class="header">
        <div class="container">
            <div class="profile-section">
                <div class="profile-image">
                    <img src="assets/images/profile.png" alt="Profile Image" id="profile-img" onerror="this.src='https://via.placeholder.com/150x150/193FB9/FFFFFF?text=LBZ'; console.error('Failed to load profile image, using placeholder')" onload="console.log('Profile image loaded successfully')">
                </div>
                <div class="profile-info">
                    <h1 class="profile-name" data-en="Bingru Li" data-zh="ÊùéÁÇ≥ÂÑí">ÊùéÁÇ≥ÂÑí</h1>
                    <p class="profile-title" data-en="Software Engineer & Developer" data-zh="ÊäÄÊúØÁæéÊúØ & ÂºÄÂèëËÄÖ">ÊäÄÊúØÁæéÊúØ & ÂºÄÂèëËÄÖ</p>
                    <p class="profile-location" data-en="Based in Suzhou, China" data-zh="Áé∞Â±Öüá®üá≥ËãèÂ∑û">Áé∞Â±Öüá®üá≥ËãèÂ∑û</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="nav-menu">
        <div class="container">
            <div class="nav-items">
                <button class="nav-item active" data-section="experiences">
                    <span class="material-icons">domain</span>
                    <span data-en="Experiences" data-zh="ÁªèÂéÜ">ÁªèÂéÜ</span>
                </button>
                <button class="nav-item" data-section="projects">
                    <span class="material-icons">grid_view</span>
                    <span data-en="Projects" data-zh="È°πÁõÆ">È°πÁõÆ</span>
                </button>
                <button class="nav-item" data-section="contact">
                    <span class="material-icons">alternate_email</span>
                    <span data-en="Contact" data-zh="ËÅîÁ≥ª">ËÅîÁ≥ª</span>
                </button>
            </div>
            <div class="nav-controls">
                <button class="btn btn-primary" id="download-cv" title="Download CV">
                    <span class="material-icons">download</span>
                    <span data-en="CV" data-zh="ÁÆÄÂéÜ">ÁÆÄÂéÜ</span>
                </button>
                <button class="btn btn-secondary" id="theme-toggle" title="Toggle Theme">
                    <span class="material-icons">dark_mode</span>
                </button>
                <button class="btn btn-secondary" id="language-toggle" title="Toggle Language">
                    <span class="material-icons">language</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content - Waterfall Layout -->
    <main class="main-content">
        <!-- Waterfall Container -->
        <div class="waterfall-container">
            <!-- Experiences Section -->
            <section id="experiences" class="full-width-section">
                <div class="experiences-timeline" id="experiences-content">
                    <!-- Content will be loaded from data file -->
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects" class="full-width-section">
                <div class="projects-grid" id="projects-content">
                    <!-- Content will be loaded from data file -->
                </div>
            </section>

            <!-- Contact Section -->
            <section id="contact" class="full-width-section">
                    <div class="contact-content">
                        <div class="contact-info">
                            <div class="contact-item" data-copy="bingru.li24@student.xjtlu.edu.cn" data-type="email">
                                <span class="material-icons">email</span>
                                <span>bingru.li24@student.xjtlu.edu.cn</span>
                            </div>
                            <div class="contact-item" data-copy="+86 18080637660" data-type="phone">
                                <span class="material-icons">phone</span>
                                <span>+86 18080637660</span>
                            </div>
                            <div class="contact-item" data-copy="LiBinZyu" data-type="wechat">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/wechat.svg" alt="WeChat" class="contact-icon">
                                <span>WeChat</span>
                            </div>
                            <div class="contact-item" data-copy="https://github.com/LiBinZyu" data-type="github">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg" alt="GitHub" class="contact-icon">
                                <span>GitHub</span>
                            </div>
                            <div class="contact-item" data-copy="https://www.linkedin.com/in/robbingruli" data-type="linkedin">
                                <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/linkedin.svg" alt="LinkedIn" class="contact-icon">
                                <span>LinkedIn</span>
                            </div>
                        </div>
                        
                        <form class="contact-form" id="contact-form">
                            <h4 data-en="Drop me a message" data-zh="ÊÉ≥Ë¶ÅÁïôË®ÄÂêóÔºü">Drop me a message</h3>
                            <div class="wave-group">
                              <span data-en="Name -optional" data-zh="ÂßìÂêç -optional">ÂßìÂêç optional</span>
                              <input type="text" id="contact-name" name="name" class="input" maxlength="50" autocomplete="off">
                              <span class="bar"></span>
                            </div>
                            <div class="wave-group">
                              <span data-en="Contact -optional" data-zh="ËÅîÁ≥ªÊñπÂºè -optional">ËÅîÁ≥ªÊñπÂºè optional</span>
                              <input type="text" id="contact-contact" name="contact" class="input" maxlength="100" autocomplete="off">
                              <span class="bar"></span>
                            </div>
                            <div class="form-group">
                              <textarea id="contact-message" name="message" class="message-textarea" rows="4" maxlength="300" required style="resize:vertical; min-height:80px; max-height:180px;"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <span class="material-icons">send</span>
                                <span data-en="Send" data-zh="ÂèëÈÄÅ">ÂèëÈÄÅ</span>
                            </button>
                        </form>
                    </div>
            </section>
        </div>
    </main>

    <!-- Project Modal -->
    <div id="project-modal" class="project-modal">
        <div class="modal-backdrop" id="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <span class="material-icons">close</span>
            </button>
            <div class="modal-media">
                <div class="media-container" id="modal-media-container">
                    <!-- Images and videos will be dynamically loaded here -->
                </div>
                <div class="media-controls">
                    <button class="media-prev" id="media-prev">
                        <span class="material-icons">chevron_left</span>
                    </button>
                    <button class="media-next" id="media-next">
                        <span class="material-icons">chevron_right</span>
                    </button>
                </div>
                <div class="media-indicators" id="media-indicators">
                    <!-- Indicators will be dynamically generated -->
                </div>
            </div>
            <div class="modal-info">
                <h2 class="modal-title" id="modal-title"></h2>
                <p class="modal-description" id="modal-description"></p>
                <div class="modal-tech" id="modal-tech"></div>
                <div class="modal-links" id="modal-links"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">
                    <span data-en="Last updated:" data-zh="ÊúÄÂêéÊõ¥Êñ∞Ôºö">ÊúÄÂêéÊõ¥Êñ∞Ôºö</span>
                    <span id="last-updated">2025-09-10</span>
                </p>
                <p class="footer-text">
                    <span data-en="Location:" data-zh="ÊâÄÂú®Âú∞Ôºö">ÊâÄÂú®Âú∞Ôºö</span>
                    <span data-en="üá®üá≥ Suzhou | Shanghai" data-zh="üá®üá≥ ËãèÂ∑û | ‰∏äÊµ∑">üá®üá≥ ËãèÂ∑û | ‰∏äÊµ∑</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="data/data.js"></script>
    <script src="js/components.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Vanta.js Birds Effect -->
    <script>
        // Vanta.js birds effect instance
        let vantaEffect = null;
        
        // Color schemes for different themes
        const lightThemeColors = {
            color1: 0x8d9aeb,
            color2: 0x465bff,
            speedLimit: 5.00
        };
        
        const darkThemeColors = {
            color1: 0x372b6e,
            color2: 0x142455,
            speedLimit: 4.00
        };
        
        // Function to initialize Vanta effect
        function initVantaEffect() {
            // Check current theme
            const isDarkTheme = document.body.classList.contains('theme-dark');
            const colors = isDarkTheme ? darkThemeColors : lightThemeColors;
            
            // Destroy existing effect if it exists
            if (vantaEffect) {
                vantaEffect.destroy();
            }
            
            // Initialize new effect
            vantaEffect = VANTA.BIRDS({
                el: "#vanta-birds",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                scale: 1.00,
                scaleMobile: 1.00,
                backgroundAlpha: 0.00,
                ...colors
            });
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initVantaEffect();
        });
        
        // Listen for theme changes
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                // Wait for theme class to be applied
                setTimeout(() => {
                    initVantaEffect();
                }, 100);
            });
        }
        
        // Scroll Spy and Smooth Scroll functionality
        function initScrollSpy() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.waterfall-section');
            
            // Smooth scroll function
            function smoothScrollTo(targetId) {
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    const offsetTop = targetElement.offsetTop - 100; // Account for sticky nav
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth'
                    });
                }
            }
            
            // Update active nav item based on scroll position
            function updateActiveNav() {
                const scrollPos = window.scrollY + 150; // Offset for better detection
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const sectionId = section.getAttribute('id');
                    
                    if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                        // Remove active class from all nav items
                        navItems.forEach(item => item.classList.remove('active'));
                        
                        // Add active class to corresponding nav item
                        const activeNavItem = document.querySelector(`[data-section="${sectionId}"]`);
                        if (activeNavItem) {
                            activeNavItem.classList.add('active');
                        }
                    }
                });
            }
            
            // Add click event listeners to nav items
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetSection = this.getAttribute('data-section');
                    smoothScrollTo(targetSection);
                });
            });
            
            // Add scroll event listener
            window.addEventListener('scroll', updateActiveNav);
            
            // Initial call to set correct active state
            updateActiveNav();
        }
        
        // Initialize scroll spy when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initScrollSpy();
        });
    </script>
</body>
</html>
